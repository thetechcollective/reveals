/**
 * Business Model Canvas (BMC) Layout
 * Creates a 9-block canvas layout for business model visualization
 */

// BMC Layout Mixins - DRY principle
@mixin bmc-box-base {
  float: left;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 8px;
  padding: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  overflow-y: auto;
  box-sizing: border-box;
  margin: 0 0.5% 0 0 !important;
}

.reveal .slides section.bmc {
  // Set up the BMC container - responsive centering
  position: relative !important;
  height: 100vh !important;
  width: 100vw !important;
  overflow: hidden;
  
  // Create a centered content area that scales properly
  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(90vw, 1200px);
    height: min(80vh, 800px);
    pointer-events: none;
    border: 1px solid transparent; // Visual reference for centering
  }
  

  // SOLID & DRY BMC SCSS
  @mixin bmc-box-base {
    float: left;
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 8px;
    padding: 10px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    backdrop-filter: blur(5px);
    overflow-y: auto;
    box-sizing: border-box;
    margin: 0 0.5% 0 0 !important;
  }

  @mixin bmc-column-box($order) {
    @include bmc-box-base;
    width: 18%;
    order: $order;
  }

  @mixin bmc-wide-box($order) {
    @include bmc-box-base;
    width: 48%;
    clear: both;
    order: $order;
  }

  @mixin bmc-single-row {
    min-height: 22vh;
  }

  @mixin bmc-double-row {
    min-height: 48vh;
  }

  // Typography for BMC boxes
  .bmc-partners li,
  .bmc-activities li,
  .bmc-resources li,
  .bmc-valueprop li,
  .bmc-relations li,
  .bmc-channels li,
  .bmc-segments li,
  .bmc-cost li,
  .bmc-revenue li {
    margin-bottom: 2px !important;
    font-size: 0.16em !important;
    line-height: 1.2 !important;
    color: #fff !important;
  }
  .bmc-partners p,
  .bmc-activities p,
  .bmc-resources p,
  .bmc-valueprop p,
  .bmc-relations p,
  .bmc-channels p,
  .bmc-segments p,
  .bmc-cost p,
  .bmc-revenue p {
    font-size: 0.16em !important;
    line-height: 1.2 !important;
    margin-bottom: 4px !important;
    color: #fff !important;
  }

  .reveal .slides section.bmc {
    position: relative !important;
    max-width: 1200px;
    width: 90vw;
    height: 80vh;
    margin: 0 auto;
    left: 50%;
    transform: translateX(-50%);
    overflow: hidden;
    background: none;
    box-sizing: border-box;
    h1, h2, h3, h4, h5, h6 { display: none; }

    // BMC box layout
    .bmc-partners      { @include bmc-column-box(1); @include bmc-double-row;
      &::before { content: "Key Partners"; color: #ff6b6b; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
    .bmc-activities    { @include bmc-column-box(2); @include bmc-single-row;
      &::before { content: "Key Activities"; color: #4ecdc4; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
    .bmc-resources     { @include bmc-column-box(3); @include bmc-single-row;
      &::before { content: "Key Resources"; color: #45b7d1; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
    .bmc-valueprop     { @include bmc-column-box(4); @include bmc-double-row;
      &::before { content: "Value Propositions"; color: #f39c12; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
    .bmc-relations     { @include bmc-column-box(5); @include bmc-single-row;
      &::before { content: "Customer Relationships"; color: #9b59b6; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
    .bmc-channels      { @include bmc-column-box(6); @include bmc-single-row;
      &::before { content: "Channels"; color: #e74c3c; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
    .bmc-segments      { @include bmc-column-box(7); @include bmc-double-row;
      &::before { content: "Customer Segments"; color: #2ecc71; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
    .bmc-cost          { @include bmc-wide-box(1);
      &::before { content: "Cost Structure"; color: #e67e22; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
    .bmc-revenue       { @include bmc-wide-box(2);
      &::before { content: "Revenue Streams"; color: #27ae60; display: block; font-weight: bold; font-size: 0.4em !important; text-align: center; margin-bottom: 8px; }
    }
  }

  @media (max-width: 768px) {
    .reveal .slides section.bmc {
      max-width: 100vw;
      width: 100vw;
      height: 100vh;
      .bmc-partners,
      .bmc-activities,
      .bmc-resources,
      .bmc-valueprop,
      .bmc-relations,
      .bmc-channels,
      .bmc-segments,
      .bmc-cost,
      .bmc-revenue {
        position: static !important;
        width: 100% !important;
        height: auto !important;
        margin-bottom: 10px !important;
        left: auto !important;
        right: auto !important;
        top: auto !important;
        bottom: auto !important;
        float: none !important;
        clear: both !important;
      }
    }
  }
}